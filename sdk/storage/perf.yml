variables:
  NugetSecurityAnalysisWarningLevel: 'none'
  skipComponentGovernanceDetection: 'true'

pool:
  name: "azsdk-pool-mms-ubuntu-2004-general"
  vmImage: "MMSUbuntu20.04"

resources:
  repositories:
  - repository: azure-sdk-tools
    type: github
    endpoint: Azure
    name: Azure/azure-sdk-tools
    ref: perf-automation

steps:
  - checkout: self
  - checkout: azure-sdk-tools

  - script: dotnet run -- run --help
    displayName: Run perf tests
    workingDirectory: azure-sdk-tools/tools/perf-automation/Azure.Sdk.Tools.PerfAutomation
    env:
      AZURE_STORAGE_ACCOUNT_KEY: $(azure-storage-account-key)
      AZURE_STORAGE_ACCOUNT_NAME: $(azure-storage-account-name)
      AZURE_STORAGE_CONNECTION_STRING: $(azure-storage-connection-string)
      STANDARD_STORAGE_CONNECTION_STRING: $(standard-storage-connection-string)
      STORAGE_CONNECTION_STRING: $(storage-connection-string)
